<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="referrer" content="no-referrer-when-downgrade">
  <link rel="icon" href="favicon-32x32.png">
  <title>–≥–∞–º–Ω–æ</title>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      min-height: 100vh;
      color: #ffe6f2;
      background:
        radial-gradient(1200px 500px at 50% -10%, rgba(255, 0, 170, .18), transparent 40%),
        radial-gradient(800px 400px at 10% 110%, rgba(0, 255, 255, .12), transparent 40%),
        #06030a;
    }

    /* NAV */
    .nav {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: rgba(6, 3, 10, .55);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255, 0, 170, .25);
    }

    .nav-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 10px 14px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: #ffd6ef;
      font-weight: 900;
      letter-spacing: 1px;
    }

    .brand img {
      width: 28px;
      filter: drop-shadow(0 0 10px rgba(255, 47, 191, .8));
    }

    .nav-links {
      margin-left: auto;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-links a {
      text-decoration: none;
      color: #ffd6ef;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 0, 170, .25);
      background: rgba(255, 255, 255, .03);
      transition: .2s;
      font-size: 14px;
      white-space: nowrap;
    }

    .nav-links a:hover {
      transform: translateY(-1px);
      border-color: rgba(255, 0, 170, .55);
      box-shadow: 0 0 18px rgba(255, 47, 191, .25);
    }

    /* LAYOUT */
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 26px 14px 60px
    }

    .section {
      padding: 18px 0
    }

    .grid {
      display: grid;
      gap: 18px;
      justify-items: center
    }

    .card {
      width: min(760px, 100%);
      padding: 52px 64px;
      text-align: center;
      border-radius: 22px;
      background: rgba(255, 255, 255, .04);
      border: 1px solid rgba(255, 0, 170, .35);
      box-shadow:
        0 0 40px rgba(255, 0, 170, .25),
        0 0 120px rgba(255, 0, 170, .15),
        inset 0 0 30px rgba(255, 255, 255, .05);
      backdrop-filter: blur(12px);
    }

    .logo {
      width: 96px;
      margin: 0 auto 12px;
      display: block;
      filter: drop-shadow(0 0 12px rgba(255, 47, 191, .9)) drop-shadow(0 0 36px rgba(255, 47, 191, .6));
    }

    h1 {
      font-size: 68px;
      letter-spacing: 3px;
      margin-bottom: 14px;
      color: #ff4fd8;
      text-shadow:
        0 0 6px #ff4fd8,
        0 0 16px #ff4fd8,
        0 0 40px #ff2fbf,
        0 0 90px rgba(255, 47, 191, .8);
      animation: neon 2.2s ease-in-out infinite;
    }

    @keyframes neon {

      0%,
      100% {
        filter: brightness(1)
      }

      50% {
        filter: brightness(1.25)
      }
    }

    :root {
      --btn-def-color: linear-gradient(90deg, #ff2fbf, #ff6fe3);
      --btn-ok-color: linear-gradient(90deg, #55f7d4, #8dff35);
      --btn-error-color: linear-gradient(90deg, #ff3636, #af264b);
      --btn-warning-color: linear-gradient(90deg, #d5ef54, #ffdd00);
      --btn-info-color: linear-gradient(90deg, #00ffff, #00ffff);
      --btn-status-color: var(--btn-def-color);
      --btn-status-animation: statusUpdate .8s cubic-bezier(.15, .79, .16, 1) forwards;
    }

    @keyframes statusUpdate {
      0% {
        transform: translateY(0px) scale(1) rotate(0deg);
        background: var(--btn-def-color);
      }

      25% {
        transform: translateY(0px) scale(1.03) rotate(1deg);
        background: var(--btn-status-color);
      }

      75% {
        transform: translateY(0px) scale(1.03) rotate(-1deg);
        background: var(--btn-status-color);
      }

      100% {
        transform: translateY(0px) scale(1) rotate(0deg);
        background: var(--btn-def-color);
      }
    }

    p {
      opacity: .75;
      margin-bottom: 26px;
      color: #ffd6ef
    }

    .btns {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      border: 0;
      cursor: pointer;
      padding: 14px 34px;
      border-radius: 999px;
      background: var(--btn-def-color);
      color: #160010;
      font-weight: 800;
      letter-spacing: 1px;
      box-shadow: 0 0 14px rgba(255, 47, 191, .8), 0 0 40px rgba(255, 47, 191, .6);
      transition: all .25s ease;
    }

    .btn:hover {
      box-shadow: 0 0 22px rgba(255, 47, 191, 1), 0 0 70px rgba(255, 47, 191, .9);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: rgba(255, 255, 255, .06);
      color: #ffd6ef;
      border: 1px solid rgba(255, 0, 170, .35);
      box-shadow: none;
    }

    /* OVERLAY */
    #ov {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(5, 0, 8, .88);
      z-index: 999;
      padding: 24px;
    }

    .overlay-card {
      width: min(1080px, 96vw);
      border-radius: 22px;
      border: 1px solid rgba(255, 0, 170, .35);
      background: rgba(255, 255, 255, .03);
      backdrop-filter: blur(14px);
      box-shadow: 0 0 60px rgba(255, 47, 191, .18);
      overflow: hidden;
    }

    .overlay-top {
      display: flex;
      gap: 14px;
      align-items: center;
      justify-content: space-between;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(255, 0, 170, .18);
    }

    .overlay-title {
      font-weight: 900;
      letter-spacing: 1px;
      color: #ffd6ef;
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: none;
    }

    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid rgba(0, 255, 255, .25);
      background: rgba(0, 255, 255, .06);
      color: #bffcff;
      opacity: .9;
    }

    .overlay-body {
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 14px;
      padding: 14px;
      align-items: start;
    }

    .player {
      position: relative;
      border-radius: 16px;
      border: 2px solid rgba(255, 0, 170, .6);
      box-shadow: 0 0 30px rgba(255, 0, 170, .6), 0 0 80px rgba(255, 0, 170, .35);
      overflow: hidden;
      background: #000;
    }

    .player .restricted-area .restricted-info-block {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 10px;
      color: #ffd6ef;
      font-size: 24px;
      font-weight: 900;
      text-align: center;
      transition: all .5s;
      border-radius: 15px;
      backdrop-filter: blur(0px);
      background: rgba(0, 0, 0, 0);
      padding: 18px;
    }

    .player.restricted .restricted-area {
      display: flex;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 10px;
      color: #ffd6ef;
      font-size: 24px;
      font-weight: 900;
      transition: all .5s;
      border-radius: 15px;
      backdrop-filter: blur(0px);
      background: rgba(0, 0, 0, 0);
    }

    .player.restricted #ytthumb {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .player #ytthumb {
      display: none;
    }

    .player.restricted .restricted-area .restricted-info-block {
      display: flex;
      backdrop-filter: blur(10px) grayscale(.5);
      background: rgba(0, 0, 0, .45);
      border: 1px solid rgba(255, 0, 170, .25);
      border-radius: 14px;
      max-width: 92%;
    }

    /* ====== –ü–û–î–ü–ò–°–¨ –ü–û–î –í–ò–î–û–°–û–ú (–Æ–¢–£–ë-–°–¢–ê–ô–õ) ====== */
    .video-info-block {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 14px;

      padding: 12px 14px;
      border-top: 1px solid rgba(255, 0, 170, .18);

      background: rgba(0, 0, 0, .35);
      backdrop-filter: blur(10px);

      color: #ffd6ef;
      border-radius: 0 0 14px 14px;
    }

    .vi-left,
    .vi-right {
      min-width: 0;
    }

    .vi-left {
      flex: 1 1 auto;
    }

    .vi-right {
      flex: 0 0 280px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      align-items: center;
      text-align: right;
    }

    .vi-label {
      font-size: 11px;
      opacity: .55;
      letter-spacing: .7px;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .vi-title {
      font-size: 13px;
      font-weight: 900;
      opacity: .95;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .vi-author-wrap {
      min-width: 0;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 2px;
    }

    .vi-author {
      font-size: 12px;
      opacity: .9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 220px;
    }

    .vi-avatar {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      flex: 0 0 34px;

      display: grid;
      place-items: center;

      font-weight: 900;
      font-size: 12px;
      color: #150010;

      border: 1px solid rgba(0, 255, 255, .35);
      box-shadow: 0 0 18px rgba(0, 255, 255, .25);

      background: radial-gradient(circle at 30% 25%, rgba(255, 255, 255, .55), rgba(255, 255, 255, .0) 55%),
        linear-gradient(135deg, rgba(0, 255, 255, .9), rgba(255, 47, 191, .95));
      user-select: none;
    }

    .avatar-img {
      width: 98%;
      height: 98%;
      object-fit: cover;
      border-radius: 999px;
    }

    #yt {
      width: 100%;
      aspect-ratio: 16/9;
      display: block;
      border: 0;
      background: #000;
    }

    .side {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .gif {
      width: 100%;
      border-radius: 16px;
      border: 2px solid rgba(0, 255, 255, .35);
      box-shadow: 0 0 25px rgba(0, 255, 255, .35);
      overflow: hidden;
      background: rgba(0, 0, 0, .3);
    }

    .gif img {
      width: 100%;
      display: block;
    }

    .panel {
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, .10);
      background: rgba(0, 0, 0, .25);
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, .35);
      background: rgba(255, 255, 255, .06);
      color: #ffd6ef;
      outline: none;
    }

    .input::placeholder {
      color: rgba(255, 214, 239, .6);
    }

    .small {
      font-size: 12px;
      opacity: .7;
      line-height: 1.4;
      color: #ffd6ef;
    }

    .status {
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255, 0, 170, .18);
      background: rgba(255, 0, 170, .08);
      color: #ffd6ef;
      min-height: 34px;
      display: flex;
      align-items: center;
    }

    .overlay-foot {
      padding: 10px 14px 14px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      border-top: 1px solid rgba(255, 0, 170, .18);
      color: #ff9fe8;
      font-size: 12px;
      opacity: .75;
    }

    /* MOBILE */
    @media (max-width:900px) {
      .overlay-body {
        grid-template-columns: 1fr;
      }

      .side {
        flex-direction: column-reverse;
      }
    }

    @media (max-width:600px) {
      .card {
        padding: 32px 26px
      }

      .logo {
        width: 72px
      }

      h1 {
        font-size: 44px
      }

      p {
        font-size: 14px
      }

      .btn {
        padding: 14px 22px;
        font-size: 15px
      }
    }

    /* ===== FIX –¢–û–õ–¨–ö–û –î–õ–Ø –ú–û–ë–ò–õ–ö–ò ===== */
    @media (max-width:500px) {
      #ov {
        padding: 10px;
      }

      .overlay-top {
        padding: 10px;
        gap: 10px;
        flex-wrap: wrap;
      }

      .overlay-body {
        padding: 10px;
        gap: 10px;
      }

      .gif {
        max-height: 200px;
      }

      .gif img {
        max-height: 200px;
        width: 100%;
        object-fit: contain;
      }

      .input {
        font-size: 16px;
      }

      .overlay-foot {
        flex-direction: column;
        gap: 6px;
      }

      .video-info-block {
        flex-direction: column;
      }

      .vi-right {
        flex: 1 1 auto;
        width: 100%;
        justify-content: flex-start;
        text-align: left;
      }

      .vi-author-wrap {
        align-items: flex-start;
      }

      .vi-author {
        max-width: 100%;
      }
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <div class="nav">
    <div class="nav-inner">
      <a class="brand" href="#home">
        <img src="logo-42.png" alt="42">
        <span>GAMNO</span>
      </a>
      <div class="nav-links">
        <a href="#home">–≥–ª–∞–≤–Ω–∞—è</a>
      </div>
    </div>
  </div>

  <div class="container">
    <section class="section" id="home">
      <div class="grid">
        <div class="card">
          <img class="logo" src="logo-42.png" alt="42 logo">
          <h1>–≥–∞–º–Ω–æ</h1>
          <p>—Å–∞–π—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≥–∞–º–Ω–∞</p>

          <div class="btns">
            <button class="btn" id="open">‚ñ∂ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–Ω–¥–æ–º</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- OVERLAY -->
  <div id="ov" aria-hidden="true">
    <div class="overlay-card" role="dialog" aria-modal="true">
      <div class="overlay-top">
        <div class="overlay-title">
          GAMNO PLAYER <span class="pill">—Ä–∞–Ω–¥–æ–º</span>
        </div>
        <div class="btns">
          <button class="btn secondary" id="closeBtn">‚úñ –∑–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>

      <div class="overlay-body">
        <div class="player" id="player">
          <div class="restricted-area" id="restricted-area">
            <img id="ytthumb" src="" alt="">
            <div class="restricted-info-block" id="restricted-info-block">
              <span>—ç—Ç–æ –≤–∏–¥–µ–æ –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ –Ω–∞ –≥–∞–º–Ω–æ</span>
              <span style="font-size:14px;opacity:.85;font-weight:700">
                –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–ª–∏–∫–∞–π –Ω–∞
                <a href="https://youtube.com" id="ytlink-restricted" style="color:#00ffff">youtube</a>
              </span>
            </div>
          </div>

          <iframe id="yt" allow="autoplay; encrypted-media" allowfullscreen></iframe>

          <!-- –ü–û–î–ü–ò–°–¨ –ü–û–î –í–ò–î–û–°–û–ú -->
          <div class="video-info-block" id="videoInfo">
            <div class="vi-left">
              <div class="vi-label">–Ω–∞–∑–≤–∞–Ω–∏–µ</div>
              <div class="vi-title" id="videoName" title="‚Äî">‚Äî</div>
            </div>

            <div class="vi-right">
              <div class="vi-avatar" id="authorAvatar" title="‚Äî">??</div>
              <div class="vi-author-wrap">
                <div class="vi-label">–∞–≤—Ç–æ—Ä</div>
                <div class="vi-author" id="videoAuthor" title="‚Äî">‚Äî</div>
              </div>
            </div>
          </div>
        </div>

        <div class="side">
          <div class="panel">
            <div class="small">–æ—Ç–ø—Ä–∞–≤—å —Å–≤–æ—ë –≤–∏–¥–µ–æ (–ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç: youtu.be / watch?v=)</div>
            <input class="input" type="text" id="sendurl" placeholder="https://youtu.be/dQw4w9WgXcQ">
            <button class="btn" id="send">‚ûï –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞–Ω–¥–æ–º</button>
            <div class="status" id="status">–≥–æ—Ç–æ–≤.</div>
            <button class="btn secondary" id="open2" title="–û—Ç–∫—Ä–æ–µ—Ç –Ω–æ–≤–æ–µ —Ä–∞–Ω–¥–æ–º–Ω–æ–µ">üé≤ –Ω–æ–≤–æ–µ</button>
          </div>

          <div class="gif">
            <img src="dance.gif" alt="dance gif">
          </div>
        </div>
      </div>

      <div class="overlay-foot">
        <div>–∑–∞–∫—Ä—ã—Ç—å: –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É –∏–ª–∏ esc</div>
        <div>–µ—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è ‚Äî –æ–Ω–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ youtube</div>
      </div>
    </div>
  </div>

  <script>
    class RootHandler {
      static root = document.documentElement;
      static setProperty(property, value) {
        this.root.style.setProperty(property, value);
      }
      static getProperty(property) {
        return this.root.style.getPropertyValue(property);
      }
    }

    class StatusHandler {
      static colors = {
        ok: "var(--btn-ok-color)",
        error: "var(--btn-error-color)",
        warning: "var(--btn-warning-color)",
        info: "var(--btn-info-color)",
        default: "var(--btn-def-color)"
      }

      constructor(el) {
        this.statusEl = el;
        this.prevText = this.statusEl.textContent;
      }

      async set(t, color = StatusHandler.colors.default) {
        this.statusEl.textContent = t;
        RootHandler.setProperty("--btn-status-color", color);
        this.statusEl.style.animation = "statusUpdate .8s cubic-bezier(.15, .79, .16, 1) forwards";
        setTimeout(() => {
          RootHandler.setProperty("--btn-status-color", StatusHandler.colors.default);
          this.statusEl.style.animation = "";
        }, 800);
        setTimeout(() => {
          this.statusEl.textContent = this.prevText;
        }, 2000);
      }
    }

    const apiHost = "https://api.femboyz.cloud:1488";

    const ov = document.getElementById("ov");
    const yt = document.getElementById("yt");
    const statusEl = document.getElementById("status");
    const playerEl = document.getElementById("player");

    const nameEl = document.getElementById("videoName");
    const authorEl = document.getElementById("videoAuthor");
    const avatarEl = document.getElementById("authorAvatar");

    function setStatus(t) { statusEl.textContent = t; }
    const statusHandler = new StatusHandler(document.getElementById("send"));

    // v2
    async function requestRandomVideo() {
      try {
        const r = await fetch(`${apiHost}/v2/get_random`).then(r => r.json());
        return {
          Id: r.id,
          VideoName: r.video_name,
          VideoAuthorName: r.video_author_name,
          IsEmbeddable: r.is_embeddable,
          ChannelLogoImg: r.logo_url
        };
      } catch (e) {
        console.error(e);
        return null;
      }
    }

    // v2
    async function requestAddVideo(video_id) {
      if (!video_id) {
        return { Error: 400 };
      }
      try {
        const resp = await fetch(`${apiHost}/v2/add?id=${encodeURIComponent(video_id)}`, { method: "POST" });
        if (!resp.ok) {
          return { Error: resp.status };
        }
        const r = await resp.json();
        return {
          Id: r.id,
          VideoName: r.video_name,
          VideoAuthorName: r.video_author_name,
          IsEmbeddable: r.is_embeddable,
          Error: null
        };
      } catch (e) {
        console.error(e);
        return { Error: 500 };
      }
    }

    function normalizeUrl(u) {
      const s = (u || "").trim();
      if (!s) return "";
      if (s.startsWith("youtu.be/") || s.startsWith("www.youtube.com") || s.startsWith("youtube.com")) {
        return "https://" + s;
      }
      return s;
    }

    function parseYouTubeVideoId(url) {
      try {
        const fixed = normalizeUrl(url);
        const urlObj = new URL(fixed);
        let id = null;

        if (urlObj.hostname === "youtu.be") {
          id = urlObj.pathname.slice(1).split("?")[0];
        }

        if (urlObj.hostname === "www.youtube.com" || urlObj.hostname === "youtube.com" || urlObj.hostname === "m.youtube.com") {
          if (urlObj.pathname === "/watch") id = urlObj.searchParams.get("v");
          if (urlObj.pathname.startsWith("/embed/")) id = urlObj.pathname.split("/")[2];
          if (urlObj.pathname.startsWith("/v/")) id = urlObj.pathname.split("/")[2];
          if (urlObj.pathname.startsWith("/shorts/")) id = urlObj.pathname.split("/")[2];
        }

        if (!id || id.length !== 11) return null;
        return id;
      } catch (e) {
        return null;
      }
    }

    function openOverlay() {
      ov.style.display = "flex";
      ov.setAttribute("aria-hidden", "false");
    }

    function closeOverlay() {
      ov.style.display = "none";
      ov.setAttribute("aria-hidden", "true");
      yt.src = "";
      playerEl.classList.remove("restricted");
      document.getElementById("ytthumb").src = "";
    }

    async function getYTthumb(id) {
      const res = await fetch(`https://img.youtube.com/vi/${id}/sddefault.jpg`);
      return res.url;
    }

    function setVideoMeta(name, author, logoUrl = null) {
      const safeName = (name && String(name).trim()) ? String(name).trim() : "–±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è";
      const safeAuthor = (author && String(author).trim()) ? String(author).trim() : "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä";

      nameEl.textContent = safeName;
      authorEl.textContent = safeAuthor;

      nameEl.title = safeName;
      authorEl.title = safeAuthor;
      avatarEl.title = safeAuthor;

      if (logoUrl) {
        avatarEl.innerHTML = `<img src="${logoUrl}" class="avatar-img" />`;
      } else {
        // –∞–≤–∞—Ç–∞—Ä = –ø–µ—Ä–≤—ã–µ 1‚Äì2 –±—É–∫–≤—ã –∞–≤—Ç–æ—Ä–∞
        const letters = safeAuthor.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9]/g, "").slice(0, 2).toUpperCase();
        avatarEl.textContent = letters || "??";
      }
    }

    async function openRandom() {
      setStatus("–∏—â—É —Ä–∞–Ω–¥–æ–º...");
      const r = await requestRandomVideo();
      if (!r) {
        setStatus("–Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–Ω–¥–æ–º (—Å–µ—Ä–≤–µ—Ä/–∏–Ω–µ—Ç).");
        await statusHandler.set("–Ω–µ—Ç —Ä–∞–Ω–¥–æ–º–∞", StatusHandler.colors.error);
        return;
      }

      setVideoMeta(r.VideoName, r.VideoAuthorName, r.ChannelLogoImg);

      if (!r.IsEmbeddable) {
        setStatus("—ç—Ç–æ –≤–∏–¥–µ–æ –Ω–µ–ª—å–∑—è –≤—Å—Ç—Ä–æ–∏—Ç—å. –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ youtube.");
        const thumb = await getYTthumb(r.Id);
        document.getElementById("ytthumb").src = thumb;
        playerEl.classList.add("restricted");
        document.getElementById("ytlink-restricted").href = `https://www.youtube.com/watch?v=${r.Id}`;
      } else {
        setStatus("—É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!");
        playerEl.classList.remove("restricted");
      }

      yt.src = `https://www.youtube.com/embed/${r.Id}?autoplay=1`;
      openOverlay();
    }

    document.getElementById("open").onclick = openRandom;
    document.getElementById("open2").onclick = openRandom;
    document.getElementById("closeBtn").onclick = closeOverlay;

    document.getElementById("send").onclick = async () => {
      const url = document.getElementById("sendurl").value;
      const id = parseYouTubeVideoId(url);

      if (!id) {
        setStatus("Invalid URL (—é—Ä–ª –∏–Ω–≤–∞–ª–∏–¥)");
        await statusHandler.set("invalid url", StatusHandler.colors.error);
        return;
      }

      setStatus("–æ—Ç–ø—Ä–∞–≤–ª—è—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä...");
      await statusHandler.set("–æ—Ç–ø—Ä–∞–≤–ª—è—é...", StatusHandler.colors.info);

      const res = await requestAddVideo(id);

      if (res.Error === null) {
        setStatus(res.IsEmbeddable ? "–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ." : "–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –Ω–æ —ç—Ç–æ –≤–∏–¥–µ–æ –Ω–µ–ª—å–∑—è –≤—Å—Ç—Ä–æ–∏—Ç—å.");
        await statusHandler.set("—É—Å–ø–µ—à–Ω–æ", res.IsEmbeddable ? StatusHandler.colors.ok : StatusHandler.colors.warning);
        // –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—É –ø–æ–¥ –ø—Ä–µ–≤—å—é (–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª)
        setVideoMeta(res.VideoName, res.VideoAuthorName);
      } else if (res.Error === 409) {
        setStatus("Video already exists");
        await statusHandler.set("—É–∂–µ –µ—Å—Ç—å", StatusHandler.colors.warning);
      } else if (res.Error === 400) {
        setStatus("Invalid video ID");
        await statusHandler.set("–Ω–µ–≤–µ—Ä–Ω—ã–π id", StatusHandler.colors.error);
      } else {
        setStatus("Something went wrong");
        await statusHandler.set("–æ—à–∏–±–∫–∞", StatusHandler.colors.error);
      }

      document.getElementById("sendurl").value = "";
    };

    ov.addEventListener("click", (e) => { if (e.target === ov) closeOverlay(); });
    document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeOverlay(); });

    // –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—É—Å—Ç–æ
    setVideoMeta("‚Äî", "‚Äî");
  </script>
</body>

</html>